<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="SPA Routing" stopProcessing="true">
          <match url=".*" />
          <conditions logicalGrouping="MatchAll">
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Rewrite" url="/index.html" />
        </rule>
      </rules>
    </rewrite>

      <defaultDocument>
      <files>
        <clear />
        <add value="index.html" />
      </files>
    </defaultDocument>
  </system.webServer>
</configuration>


<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="ReverseProxyToNode" stopProcessing="true">
          <match url="(.*)" />
          <action type="Rewrite" url="http://localhost:3000/{R:1}" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration>

const authUrl = `${AUTH_URL}?response_type=code&client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&scope=bbprofile`;
console.log('Redirecionando para:', authUrl);
res.redirect(authUrl);


https://superfeira.intranet.bb.com.br/sso/oauth2/authorize?response_type=code&client_id=superfeira&redirect_uri=https%3A%2F%2Fsuperfeira.intranet.bb.com.br%2Fauth%2Fcallback&scope=bbprofile

<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="ProxyNode" stopProcessing="true">
          <match url="^(auth|api|static|css|js|img|dist)/.*" />
          <action type="Rewrite" url="http://localhost:3000/{R:0}" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration>


<configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="ReverseProxyToNode" stopProcessing="true">
          <match url=".*" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
          </conditions>
          <action type="Rewrite" url="http://localhost:3000/{R:1}" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration>

  </system.webServer>
</configuration>

The expression "http://localhost:3000/{R:1}" cannot be expanded.

C:\Users\f2251827\.pm2\logs\superfeira-api-error.log last 15 lines:
0|superfei |     at require (node:internal/modules/helpers:135:16)
0|superfei |     at Object.<anonymous> (c:\workspace\devSuperfsa\server.js:4:23)
0|superfei |     at Module._compile (node:internal/modules/cjs/loader:1730:14)
0|superfei |     at Object..js (node:internal/modules/cjs/loader:1895:10)
0|superfei |     at Module.load (node:internal/modules/cjs/loader:1465:32)
0|superfei |     at Function._load (node:internal/modules/cjs/loader:1282:12)
0|superfei |     at Object.<anonymous> (C:\Users\f2251827\AppData\Roaming\npm\node_modules\pm2\lib\ProcessContainerFork.js:33:23)
0|superfei |     at Module._compile (node:internal/modules/cjs/loader:1730:14) {
0|superfei |   code: 'MODULE_NOT_FOUND',
0|superfei |   requireStack: [ 'c:\\workspace\\devSuperfsa\\server.js' ]
0|superfei | }
0|superfei | Erro no callback: self-signed certificate in certificate chain
0|superfei | Erro no callback: self-signed certificate in certificate chain
0|superfei | Erro no callback: self-signed certificate in certificate chain
0|superfei | Erro no callback: self-signed certificate in certificate chain
